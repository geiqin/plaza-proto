syntax = "proto3";

package services;
option go_package ="/.;services";
import "common/base.proto";
import "baseInfoService.proto";

//微信支付
service WeixinService {
    //小程序支付
    rpc MiniPay (WeixinPay) returns (WeixinResponse) {}
    //APP支付
    rpc AppPay (WeixinPay) returns (WeixinResponse) {}
    //H5支付
    rpc H5Pay (WeixinPay) returns (WeixinResponse) {}
    //提交付款码支付
    rpc MicroPay (WeixinPay) returns (WeixinResponse) {}
}

//微信支付
message WeixinPay{
    ChargeInfo charge =1; //订单信息
    WeixinPayerInfo payer_info =2; //微信买家信息
    WeixinSceneInfo scene_info =3;//微信支付场景
    SettleInfo settle_info =4;//微信结算信息
}

//微信买家信息
message WeixinPayerInfo{
    string open_id =1; //用户标识
}

//微信支付场景
message WeixinSceneInfo{
    string payer_client_ip =1; //用户终端IP
    string device_id =2;//商户端设备号
}

//微信结算信息
message SettleInfo{
  bool profit_sharing =1; //是否指定分账
}


message WeixinData {
    WeixinPay entity =1;
    map<string,string> params =2;
}


message WeixinResponse {
    WeixinData data =1;
    common.Error error = 2;
}
