syntax = "proto3";

package services;
option go_package ="/.;services";
import "common/base.proto";

//微信支付
service WeixinService {
    //发起微信支付
    rpc  Pay (WeixinPay) returns (WeixinResponse) {}
}

//微信支付
message WeixinPay{
    string pay_log_no =1; //支付单号
    WeixinPayerInfo payer_info =2; //微信买家信息
    WeixinSceneInfo scene_info =3;//微信支付场景
    SettleInfo settle_info =4;//微信结算信息
}

//微信买家信息
message WeixinPayerInfo{
    string open_id =1; //用户标识
}

//微信支付场景
message WeixinSceneInfo{
    string payer_client_ip =1; //用户终端IP
    string device_id =2;//商户端设备号
}

//微信结算信息
message SettleInfo{
  bool profit_sharing =1; //是否指定分账
}


message WeixinData {
    WeixinPay entity =1;
    map<string,string> params =2;
}


message WeixinResponse {
    WeixinData data =1;
    common.Error error = 2;
}
