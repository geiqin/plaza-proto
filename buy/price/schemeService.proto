syntax = "proto3";
package services;
option go_package = ".;services";
import "common/base.proto";
import "skuInfoService.proto";

//价格核算计划
service SchemeService {
  //商品购买计算
  rpc Purchase (SchemeRequest) returns (SchemeResponse) {}
  //商品列表计算
  rpc List (SchemeRequest) returns (SchemeResponse) {}
  //商品分润计算
  rpc Profit (SchemeRequest) returns (SchemeResponse) {}
  //商品佣金计算
  rpc Commission (SchemeRequest) returns (SchemeResponse) {}
}

message Scheme {
  int32 total_num =1;
  float total_weight =2;
  string currency =3;
  float goods_amount =4;
  float discount_amount =5;
  float shipping_fee =6;
  float insure_fee =7;
  float pack_fee =8;
  float surplus =9;
  float coupon_money =10;
  int32 integral =11;
  float integral_money =12;
  float amount =13;
  float paid_money =14;
  bool is_shipment =15;
  repeated SchemeDetail details = 16;
  repeated CouponInfo  coupons = 17;
  repeated PromotionInfo promotions = 18;
}

message CouponInfo {
  int64	 id	=1;
  string title	=2;
}

message PromotionInfo {
  int64	 id	=1;
  string title	=2;
}

message SchemeDetail {
  int64	sku_id	=1;
  int32 num =2;
  float sub_total =3;
  float price = 4;
  float market_price = 5;
  float cost_price = 6;
  float promotion_price = 7;
  float member_price = 8;
  float wholesale_price = 9;
  bool is_gift =10;
  SkuInfo sku_info =11;
}


message SchemeRequest {
  int64 area_id = 1;
  int64 coupon_id = 2;
  int64 member_id = 3;
  int32 member_rank_id = 4;
  int64 shop_id = 5;
  int64 order_id = 6;
  string terminal =7;
  string channel =8;
  string payment_method = 9;
  string shipment_method = 10;
  float insure_fee =11;
  float pack_fee =12;
  float surplus =13;
  float coupon_money =14;
  int32 integral =15;
  float integral_money =16;
  float paid_money =17;
  string currency =18;
  map<int64,int32> sku_list =19;
  repeated int64 sku_ids =20;
}

message SchemeData{
  Scheme entity = 1;
  repeated SkuInfo skus = 2;
  map<string,string> params =3;
  repeated Scheme items =4;
  common.Info info =5;
}

message SchemeResponse {
  SchemeData data = 1;
  common.Error error = 2;
}
