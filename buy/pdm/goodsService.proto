syntax = "proto3";
package services;
option go_package = "/.;services";
import "common/base.proto";
import "baseInfoService.proto";

//商品信息【基于SKU为基础，内部服务专用】
service GoodsService {
    //获取商品（简单的）
    rpc Get(GoodsRequest) returns (GoodsResponse); 
    //商品列表
    rpc List(GoodsRequest) returns (GoodsResponse);
    //商品查询
    rpc Search(GoodsRequest) returns (GoodsResponse);
}

//内部商品信息(基于SKU的商品)
message Goods {
    int64 id = 1;
    int64 spu_id = 2;
    int64 sku_id = 3;
    string type = 4; //类型
    string title = 5; //标题
    string title_color = 6; //标题颜色
    string simple_desc = 7; //简单描述
    int32 inventory = 8; //库存数量
    string unit = 9; //库存单位
    string image_url = 10; //封面URL
    string video_url = 11; //视频URL
    string is_many_spec = 12;//是否多规格商品（0否，1是）
    string is_deduction_inventory = 13; //是否扣减库存
    string is_listed = 14; //是否上架（0否，1是）
    string is_virtual = 15; //是否虚拟商品（0否，1是）
    int64 shop_id = 16; //多店铺ID
    int32 brand_id = 17;//品牌ID
    string brand_name = 18; //品牌名称
    string virtual_type = 19; //虚拟商品类型
    string virtual_data = 20; //虚拟商品扩展数据
    int64 taxonomy_id = 22;//
    int64 category_id  =23;
    int64  min_original_price =25;//最低原价
    int64  max_original_price =26;//最大原价
    int64  min_price =27;//最低价格
    int64  max_price =28;//最高价格
    int64 give_integral  = 36;
    int32 buy_min_number  = 37;
    int32 buy_max_number  = 38;
    int32 photo_count =39; //相册数量
    int32 sale_count =40; //销售量
    int32 access_count =41; //访问量
    int64 place_origin_id =42; //原产地ID
    int64 weight = 45;
    int64 volume = 46;
    string coding = 47;
    string barcode = 48;
    int64 price = 49;
    int64 original_price = 50;
    int64 cost_price = 51;
    string spec_desc =53;
    GoodsSpec  spec  =54;
    string status =55;
    string created_at = 56;
    string updated_at = 57;
    repeated GoodsSpecBase spec_base =58;
    GoodsSpecification specifications =59;
    repeated GoodsPhoto photos = 60;
    CommentScore comments_score =61;
    repeated CommentInfo comments_data =62;
    int32 comments_count =63;
    string show_field_original_price_text =64;
    string show_field_price_text =65;
    string goods_url =66;
    string is_favor = 67; //是否已收藏(0否，1是)
    string content_web =68; //web内容
    string content_app =69; //app内容
}


message GoodsPhoto{
    int64 id =1;
    string image_url =2;
    string image_old_url =3;
}

message CommentScore{
    float avg =1;
    int64 rate =2;
    repeated rate_info rating =3;
    message rate_info{
        string name =1;
        int32 count =2;
        int32 portion =3;
    }
}

message CommentInfo{
    int64 id =1;
    int64 order_id =2;
    int64 user_id =3;
    string business_type =4;
    string content =5;
    string reply =6;
    string is_reply =7;
    int32 rating =8;
    string image_url =9;
    string is_anonymous =10;
    string reply_time =11;
    string created_at =12;
    string updated_at =13;
}

message GoodsSpec {
    string spec_name =1;
    string spec_value =2;
}

message GoodsData {
    Goods goods = 1;
    repeated Goods items = 2;
    common.Pager pager = 3;
}

message GoodsResponse {
    GoodsData data = 1;
    common.Error error = 3;
}

message GoodsRequest {
    int64 paged = 1;
    int64 page_size = 2;
    string keywords = 3;
    int64 sku_id = 4;
    string sku_sn = 5;
    int64 spu_id = 6;
    string coding = 7;
    string title =8;
    string type = 9;
    int64 parent_id = 10;
    int64 category_id = 11;
    int32 term_id = 12;
    string term_name = 13;
    int32 brand_id = 14;
    int64 shop_id = 15;
    string status =16;
    string start_date =17;
    string end_date =18;
    int32 param_id = 19;
    string param_value = 20;
    int32 tag_id = 21;
    string tag_name = 22;
    string subtype =23;
    repeated int64 sku_ids =24;
}