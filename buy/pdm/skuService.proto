syntax = "proto3";
package services;
option go_package = ".;services";
import "common/base.proto";
import "spuDescService.proto";
import "brandService.proto";
import "categoryService.proto";
import "termService.proto";
import "tagService.proto";
import "spuGalleryService.proto";
import "skuVipService.proto";
import "skuCouponService.proto";
import "skuPresaleService.proto";

//操作编辑为主
service SpuService {
    //创建商品
    rpc Create(Spu) returns (SpuResponse);
    //修改商品
    rpc Update(Spu) returns (SpuResponse);
    //删除商品
    rpc Delete (Spu) returns (SpuResponse);
    //获取商品（编辑显示）
    rpc Get (Spu) returns (SpuResponse);
    //商品操作
    rpc Action (SkuRequest) returns (SpuResponse);
    //商品上下架
    rpc Sale (SkuRequest) returns (SpuResponse);
    //商品排序
    rpc Sort(SkuRequest) returns (SpuResponse);
}

//货品查询（基于后台及服务）
service SkuService {
    //获取货品
    rpc Get (Sku) returns (SkuResponse);
    //获取货品详情
    rpc Detail (Sku) returns (SkuResponse);
    //获取列表
    rpc List (SkuRequest) returns (SkuResponse);
    //货品查询（基于SKU查询）
    rpc Search (SkuRequest) returns (SkuResponse);
}

//商品信息（查询/显示）
service ProductService {
    //商品查询【后端使用】
    rpc Search (SkuRequest) returns (SpuResponse);
    //商品详情显示【后端使用】
    rpc Display (SkuRequest) returns (SpuResponse);
    //商品查询【前端使用】
    rpc FrontSearch (SkuRequest) returns (SpuResponse);
    //商品详情显示【前端使用】
    rpc FrontDisplay (SkuRequest) returns (SpuResponse);
}

message Sku {
    int64 id = 1;
    int64 spu_id = 2;
    string sku_sn = 3;
    string title = 4;
    string type = 5;
    string unit = 6;
    int64 shop_id = 7;
    int64 image_id = 8;
    string image_url = 9;
    float price = 10;
    float market_price = 11;
    float cost_price = 12;
    float promotion_price = 13;
    string barcode = 14;
    float weight = 15;
    int32 volume = 16;
    int32 stock = 17;
    int32 frozen_stock = 18;
    string out_sku_no = 19;
    bool is_spec = 20;
    bool is_virtual = 21;
    bool is_presale = 22;
    bool is_member_right = 23;
    bool is_member_price = 24;
    bool is_hide_stock = 25;
    bool is_new = 26;
    bool is_hot = 27;
    bool is_recommend = 28;
    bool is_special = 29;
    bool is_master = 30;
    string indexes =31;
    string index_pos =32;
    string status = 33;
    string listed_at = 34;
    string created_at = 35;
    string updated_at = 36;
    repeated int32 indexes_data = 37;
    map<int32,string> own_desc_data = 38;
    Spu spu = 40;
    SkuVip vip = 41;
    SkuCoupon coupon = 42;
    SkuPresale presale = 43;
    repeated SpuGallery galleries = 44;
    repeated OwnProperty own_property =45;
}

message Spu {
    int64 id = 1;
    string code = 2;
    string title = 3;
    string type = 4;
    string unit = 5;
    int32 category_id = 6;
    string category_ids = 7;
    int32 brand_id = 8;
    int64 shop_id = 9;
    int32 max_buy = 10;
    int32 min_buy = 11;
    int64 province_id = 12;
    int64 city_id = 13;
    int64 thumb_id = 14;
    string thumb_url = 15;
    int64 video_id = 16;
    string video_url = 17;
    int32 template_id = 18;
    string keywords = 19;
    string out_spu_no = 20;
    float min_price = 21;
    float max_price = 22;
    int32 stocks = 23;
    int32 collects = 24;
    int32 evaluates = 25;
    int32 shares = 26;
    int32 clicks = 27;
    int32 sales = 28;
    int32 sale_initial = 29;
    int32 sale_actual = 30;
    int32 child_num = 31;
    int64 master_sku_id = 32;
    bool is_spec = 33;
    int32 sort = 34;
    string memo = 35;
    int32 button_mode = 36;
    string button_custom = 37;
    string shipment_codes = 38;
    int32 freight_mode = 39;
    float uniform_freight = 40;
    int32 express_id = 41;
    string after_sale_codes = 42;
    string status = 43;
    string created_at = 44;
    string updated_at = 45;
    SpuDesc desc = 46;
    Brand brand = 47;
    Category category = 48;
    Sku sku = 49;
    repeated Term terms = 50;
    repeated Tag tags = 51;
    repeated Sku skus = 52;
    repeated SpuGallery galleries = 53;
    GenericProperty generic_property = 54;
    repeated SaleProperty sale_property =55;
}

message SkuRequest {
    int32 paged = 1;
    int32 page_size = 2;
    string keywords = 3;
    int64 sku_id = 8;
    string sku_sn = 9;
    int64 spu_id = 4;
    string code = 5;
    string title = 6;
    string type = 7;
    int32 category_id = 10;
    int32 term_id = 11;
    string term_name = 12;
    int32 brand_id = 13;
    int64 shop_id = 14;
    string status =15;
    string start_date =16;
    string end_date =17;
    int32 param_id = 18;
    string param_value = 19;
    int32 tag_id = 20;
    string tag_name = 21;
    int32 listed_status =22;
    int32 sort =23;
    repeated int64 spu_ids = 24;
    repeated int64 sku_ids = 25;
    repeated int64 brand_ids = 26;
    repeated int64 tag_ids = 27;
    repeated int64 term_ids = 28;
}

message SkuData {
    Sku entity = 2;
    common.Pager pager = 3;
    repeated Sku items = 4;
    common.Info info = 5;
}

message SkuResponse {
    SkuData data = 1;
    common.Error error = 2;
}

message SpuResponse {
    SpuData data = 1;
    common.Error error = 2;
}

message SpuData {
    Spu entity = 1;
    common.Pager pager = 3;
    repeated Spu items = 4;
    common.Info info = 5;
}
