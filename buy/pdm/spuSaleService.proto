syntax = "proto3";
package services;
option go_package ="/.;services";
import "common/base.proto";

// 商品销量服务
service SpuSaleService {
  // 销量增加
  rpc Add (SpuSale) returns (SpuSaleResponse) {}
  // 销量取消
  rpc Cancel (SpuSale) returns (SpuSaleResponse) {}
  // 日志查询
  rpc Logs (SpuSaleRequest) returns (SpuSaleResponse) {}
}

// 商品销量日志
message SpuSaleLog {
  int64 id = 1; //ID
  int64 spu_id = 2; //商品ID
  string unique = 3; //唯一标识
  int64 order_id = 4; //订单ID
  int64 order_detail_id = 5; //订单明细ID
  int64 num = 6; //数量
  int64 cancel_time = 11; //取消时间
  string status = 12; //状态：1-已生效,2-已取消
  int64 updated_at = 13; //创建时间
  int64 created_at = 14; //修改时间
}

// 库存请求参数
message SpuSale {
  int64 order_id = 1; //订单ID
  repeated SpuSaleLog items = 2;
}

// 库存扣减日志请求参数
message SpuSaleRequest {
  int32 top = 1;
  int64 paged = 2;
  int64 page_size = 3;
  string keywords = 4;
  repeated string sorts = 5;
  repeated string date_range = 6;
  repeated int64 ids = 7;
  int64 id = 8;
  //以下为自定义参数
  int64 spu_id = 11; //商品ID
  int64 order_id = 12; //订单ID
  int64 order_detail_id = 13; //订单明细ID
  string status = 14; //状态
}


// 库存日志数据
message SpuSaleLogsData {
  common.Pager pager = 1;
  repeated SpuSaleLog items = 2;
}

// 库存变动响应数据
message SpuSaleResponse {
  string msg = 1;
  repeated SpuSaleLogsData Logs = 2;
}