syntax = "proto3";
package services;
option go_package = "/.;services";
import "common/base.proto";
import "termService.proto";

//前端展示页面专用
service PageService {
    //商品详情页
    rpc Detail(PageRequest) returns (PageDetailResponse);
    //商品搜索页
    rpc Search(PageRequest) returns (PageSearchResponse);
    //分类导航页
    rpc Category(PageRequest) returns (PageCategoryResponse);
    //规格详情数据
    rpc SpecDetail(PageRequest) returns (PageSpecDetailResponse);
    //规格类型数据
    rpc SpecType(PageRequest) returns (PageSpecTypeResponse);
}

//前端商品详情
message GoodsDetail {
    int64 id = 1;
    string type = 5; //类型
    string title = 6; //标题
    string title_color = 7; //标题颜色
    string simple_desc = 8; //简单描述
    int32 inventory = 9; //库存数量
    string inventory_unit = 10; //库存单位
    string thumb_url = 11;
    string image_url = 12; //封面URL
    string video_url = 13; //视频URL
    bool is_many_spec = 14;//是否多规格商品
    bool is_deduction_inventory = 15; //是否扣减库存
    bool is_listed = 16; //是否上架
    bool is_favor = 17; //是否已收藏
    int64 shop_id = 18; //分店ID
    int32 brand_id = 19;//品牌ID
    string brand_name = 20; //品牌名称
    string barcode = 21; //条码
    int64 taxonomy_id = 22;//
    int64 category_id  =23;
    string content_web =24; //web内容
    string content_app =25; //app内容
    string original_price  = 30;
    int64 min_original_price  = 31;
    int64 max_original_price  = 32;
    string price  = 33;
    int64 min_price  = 34;
    int64 max_price  = 35;
    int64 give_integral  = 36;
    int32 buy_min_number  = 37;
    int32 buy_max_number  = 38;
    int32 photo_count =39; //相册数量
    int32 sale_count =40; //销售量
    int32 access_count =41;  //访问量
    string show_field_original_price_text =42;
    string show_field_price_text =43;
    string goods_url =44;
    repeated string category_names =45;
    repeated GoodsSpecBase spec_base =46;
    GoodsSpecification specifications =47;
    repeated GoodsPhoto photos = 48;
    int32 comments_count =50;
    CommentScore comments_score =51;
    repeated CommentInfo comments_data =52;
    GoodsDetailSku sku_info =53; //单规格商品
    repeated GoodsDetailSku sku_list =54;//多规格商品
}

message GoodsDetailSku  {
    int64 id =1;//ID
    int64 spu_id =2;//SpuID
    int64 original_price =3;//划线价
    int64 price =5;//销售价
    int32 inventory =6;//库存
    string md5_key =7;//唯一标识
    string coding =8;//编号
    string barcode =9;//条码
    int64 weight =10;//重量：克
    int64 volume =11;//体积
    string spec_indexes =12;//规格索引
}

message GoodsSpecBase{
    string title =1;
    repeated string values = 2;
}

message GoodsSpecification{
   repeated GoodsSpecChoose choose =1;
}

message GoodsSpecChoose{
    int64 id =1;
    string name =2;
    int64 goods_id =3;
    repeated GoodsSpecChooseValue value =4;
}

message GoodsSpecChooseValue{
    string name =1;
    string image_url =2;
}

message GoodsParameter{
    string title =1;
    repeated string values = 2;
}

message SpecDetailData{
    SpecDetailDataBase spec_base =1;
    repeated SpecDetailDataExtends extend_elements =2;
}

message SpecDetailDataBase{
    int64 id =1;
    int64 goods_id =2;
    int64 sku_id =3;
    int64 price =4;
    int32 inventory =5;
    int64 weight =6;
    int64 volume =7;
    string coding =8;
    string barcode =9;
    int64 original_price =10;
}

message SpecDetailDataExtends{
    string name =1;
}

message GoodsPhoto{
    int64 id =1;
    string image_url =2;
    string image_old_url =3;
}

message CommentScore{
    float avg =1;
    int64 rate =2;
    repeated rate_info rating =3;
    message rate_info{
        string name =1;
        int32 count =2;
        int32 portion =3;
    }
}

message CommentInfo{
    int64 id =1;
    int64 order_id =2;
    int64 user_id =3;
    string business_type =4;
    string content =5;
    string reply =6;
    string is_reply =7;
    int32 rating =8;
    string image_url =9;
    string is_anonymous =10;
    string reply_time =11;
    string created_at =12;
    string updated_at =13;
}

//参与的活动
message PluginsPromotion  {
    int64 id = 1; //活动ID
    string code = 2; //活动编码:如：coupon_20210101212
    string title = 3; //活动标题
    string type = 4; //活动类型:Coupon优惠劵/满减送/限时折扣/秒杀/拼团/通用
    string subtype = 5; //活动子类型
    string tag = 6; //标签
    repeated string preferential_items =7; //优惠项目描述
}



message CartTotalInfo{
    int32 buy_number =1;
    int64 total_price =2;
}

message BuyButton{
    int32 count =1;
    string error =2;
    bool is_buy =3;
    bool is_show =4;
    bool is_cart =5;
    repeated data_list data =6;
    message data_list{
       string color =1;
       string type =2;
       string title =3;
       string name =4;
       string class =5;
       string icon =6;
    }
}

//中间切换导航
message MiddleTabNav{
    string name =1;
    string event =2;
}

//更多列表导航
message MoreListNav{
    string name =1;
    string url =2;
    string icon =3;
}



message PluginCoupon{
    base_info base =1;
    data_info data =2;
    message base_info{
        string application_name =1;
        string banner_image_url =2;
        string banner_bg_color =3;
        string shop_application_name =4;
        bool is_repeat_receive =5;
        bool is_shop_coupon =6;
        bool is_shop_nav_coupon =7;
        string url =8;
    }
    message data_info{
        int64 id =1;
        int64 shop_id =2;
        string name =3;
        string desc =4;
        string bg_color =5;
        string type =6;
        string discount_value =7;
        bool is_user_receive =8;
        bool is_register_send =9;
        bool is_operable =10;
        bool is_operable_name =11;
        string type_name =12;
        string type_unit =13;
        string bg_color_name =14;
        string bg_color_value =15;
        string expire_type_name =16;
        string use_limit_type_name =17;
    }
}


message PluginIntellectTools {
    IntellectBaseBottom base_bottom =1;
    IntellectContentTop content_top =2;
}

message IntellectBaseBottom{
    string title =1;
    string msg =2;
}
message IntellectContentTop{
    string title =1;
    repeated string msg_list =2;
}

message PluginSeckill {
    string icon =1;
    string title =2;
    bool is_valid =3;
    string bg_image_url =4;
    time_info time =5;
    message time_info {
        int64 hours =1;
        int64 minutes =2;
        int64 seconds =3;
        string status =4;
        string msg =5;
    }
}

message PageDetailData {
    GoodsDetail goods = 1;
    CartTotalInfo cart_total =2;
    BuyButton buy_button = 3;
    repeated MiddleTabNav middle_tab_navs = 4;
    repeated MoreListNav more_list_navs =5;
    PluginCoupon plugins_coupon_data =6;
    PluginSeckill Plugins_seckill_data =7;
    PluginsPromotion  Plugins_promotion_data =8;
    PluginIntellectTools plugins_intellect_tools_data =9;
}

message PageDetailResponse {
    PageDetailData data = 1;
    common.Error error = 2;
}


message PageSearchData {
    common.Pager pager = 1;
    repeated GoodsDetail items = 2;
}

message PageSearchResponse {
    PageSearchData data = 1;
    common.Error error = 2;
}

message PageCategoryData {
    repeated Term category = 1;
}

message PageCategoryResponse {
    PageCategoryData data = 1;
    common.Error error = 2;
}

message PageSpecDetailResponse {
    SpecDetailData data = 1;
    common.Error error = 2;
}


message PageSpecTypeData {
    repeated string spec_type = 1;
    PluginsWholesaleData plugins_wholesale_data =2;

}

message PluginsWholesaleData{
    string name =1;
}

message PageSpecTypeResponse {
    PageSpecTypeData data = 1;
    common.Error error = 2;
}
message PageRequest {
    int32 paged = 1;
    int32 page_size = 2;
    string keywords = 3;
    int64 sku_id = 4;
    string sku_sn = 5;
    int64 spu_id = 6;
    string code = 7;
    string title =8;
    string type = 9;
    int64 parent_id = 10;
    int64 category_id = 11;
    int32 term_id = 12;
    string term_name = 13;
    int32 brand_id = 14;
    int64 shop_id = 15;
    string status =16;
    string start_date =17;
    string end_date =18;
    int32 param_id = 19;
    string param_value = 20;
    int32 tag_id = 21;
    string tag_name = 22;
    string subtype =23;
    repeated SpecReqInfo specs =24;
}
message SpecReqInfo{
    string type =1;
    string value =2;
}