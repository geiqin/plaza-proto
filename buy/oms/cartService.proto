syntax = "proto3";
package services;
option go_package = ".;services";
import "common/base.proto";


service CartService {
    //加入购物车商品
    rpc Add (CartRequest) returns (CartResponse) {}
    //设置购物车商品数量
    rpc Set (CartRequest) returns (CartResponse) {}
    //删除购物车商品
    rpc Remove (CartRequest) returns (CartResponse){}
    //清除购物车
    rpc Clear (CartRequest) returns (CartResponse) {}
    //获取购物车
    rpc Get (CartRequest) returns (CartResponse) {}
    //选中商品计算
    rpc Checked (CartRequest) returns (CartResponse) {}
}

message Cart {
    int32 total_num =1;
    float total_weight =2;
    string currency =3;
    int64 goods_amount =4;
    int64 discount_amount =5;
    int64 shipping_fee =6;
    int64 insure_fee =7;
    int64 pack_fee =8;
    int64 amount =9;
    int64 member_id = 10;
    int64 address_id = 11;
    int32 checked_status = 12;
    repeated CartItem items = 13;
    map<int64,int32> sku_list =14;
}

message CartItem {
    int64 spu_id = 1;
    int64 sku_id = 2;
    string sku_sn = 3;
    int64 image_id = 4;
    string image_url = 5;
    string title = 6;
    float weight = 7;
    int32 num = 8;
    int64 price = 9;
    int64 market_price = 10;
    int64 promotion_price = 11;
    int64 cost_price = 12;
    int64 row_goods_amount = 13;
    int64 row_discount_amount = 14;
    int64 row_amount = 15;
    int32 brand_id = 16;
    string brand_name = 17;
    int32 unit_id = 18;
    string unit_name = 19;
    string indexes = 20;
    string own_desc = 21;
    bool is_spec = 22;
    bool is_virtual = 23;
    bool is_presale = 24;
    string status = 25;
    bool checked = 26;
}


message CartRequest {
    int32 paged = 1;
    int32 page_size = 2;
    string keywords = 3;
    string row_id =4;
    int64 sku_id =5;
    string direction =6;
    int32 num =7;
    repeated int64 sku_ids =8;
    map<int64,int32> sku_list =9;
}

message CartData {
    Cart entity = 1;
    common.Pager pager =2;
    repeated Cart items = 3;
    common.Info info =4;
}

message CartResponse {
    CartData data = 1;
    common.Error error = 2;
}
