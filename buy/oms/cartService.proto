syntax = "proto3";
package services;
option go_package = "/.;services";
import "common/base.proto";
import "baseInfoService.proto";

service CartService {
    //加入购物车
    rpc Save (CartRequest) returns (CartResponse) {}
    //删除购物车商品
    rpc Remove (CartRequest) returns (CartDetailResponse){}
    //清除购物车
    rpc Clear (CartRequest) returns (CartDetailResponse) {}
    //购物车详情
    rpc Detail (CartRequest) returns (CartDetailResponse) {}
    //更新购物车数量（根据cartId）
    rpc Stock (CartRequest) returns (CartStockResponse) {}
    //获得统计数量(服务调的多)
    rpc Count (CartRequest) returns (CartDetailResponse) {}
    //选中商品计算
    rpc Checked (CartRequest) returns (CartDetailResponse) {}
}

message Cart  {
    int64  id =1; //ID
    int64  member_id =2; //会员ID
    int64  sku_id =3; //商品skuId
    int64  spu_id =4; //商品spuId
    string title =5; //标题
    string image_url =6; //封面图片
    int64  original_price =7; //原价
    int64  price =8; //销售价格
    int32  number =9; //购买数量
    int32  inventory =11; //库存量
    repeated SpecificationData spec =10; //规格描述
}

//购物车数据
message CartData {
    int32 buy_number =1;
    int64 total_price =2;
    int64 address_id = 3;
    repeated GoodsInfo items =4;
    repeated PromotionInfo promotions_data =5;
}

message CartRequest {
    string type =1;
    int64 id =2;
    int64 spu_id =3;
    int64 sku_id =4;
    int32 number =5;
    repeated SpecificationData spec =6;
    repeated int64 ids =9;
}



message CartResponse {
    Cart data = 1;
    common.Error error = 2;
}

message CartDetailResponse {
    CartData data = 1;
    common.Error error = 2;
}
message CartStockResponse {
    Cart data = 1;
    common.Error error = 2;
}