syntax = "proto3";
package services;
option go_package =".;services";
import "common/base.proto";
import "tagService.proto";
import "rankService.proto";
import "addressService.proto";
import "fanService.proto";


service MemberService {
    //通过账号注册用户
    rpc Register (MemberRequest) returns (MemberResponse) {}
    //从粉丝添加用户
    rpc RegisterByFan (Fan) returns (MemberResponse) {}
    //通过手机注册用户
    rpc RegisterByMobile (MemberRequest) returns (MemberResponse) {}
    //通过邮箱注册用户
    rpc RegisterByEmail (MemberRequest) returns (MemberResponse) {}
    //验证账户信息
    rpc ToLogin (MemberRequest) returns (MemberResponse) {}

    rpc Create (Member) returns (MemberResponse) {}
    //手动添加单位用户
    rpc CreateCompany (Member) returns (MemberResponse) {}
    //手动修改单位用户
    rpc UpdateCompany (Member) returns (MemberResponse) {}

    //修改客户
    rpc Update (Member) returns (MemberResponse) {}
    //删除客户
    rpc Delete (MemberRequest) returns (MemberResponse) {}
    //锁定客户
    rpc Lock (MemberRequest) returns (MemberResponse) {}
    //解锁客户
    rpc Unlock (MemberRequest) returns (MemberResponse) {}
    //获得客户
    rpc Get (Member) returns (MemberResponse) {}
    //获得客户详情
    rpc Detail (Member) returns (MemberResponse) {}
    //根据ids获得客户
    rpc List (MemberRequest) returns (MemberResponse) {}
    //查询客户
    rpc Search (MemberRequest) returns (MemberResponse) {}
    //设置会员标签
    rpc SetTags (Member) returns (MemberResponse) {}
    //设置会员等级
    rpc SetRank (Member) returns (MemberResponse) {}
    //获取已绑定手机用户(SRV专用)
    rpc GetByMobile (MemberRequest) returns (MemberResponse) {}
    //获取已绑定邮箱用户(SRV专用)
    rpc GetByEmail (MemberRequest) returns (MemberResponse) {}
}


message Member {
    int64 id =1;
    int32 type = 2;
    string name =3;
    string gender =4;
    int64 avatar_id =5;
    string avatar_url =6;
    int32 rank_id =7;
    string rank_expired_at =8;
    bool rank_valid =9;
    float surplus =10;
    float deposit =11;
    int32 pay_points =12;
    int32 rank_points =13;
    int32 traded_num =14;
    int64 traded_money =15;
    int32 comment_num =16;
    int32 collect_num =17;
    int64 recommender_id =18;
    bool trusted =19;
    bool bound_mobile =20;
    bool bound_email =21;
    bool bound_wx =22;
    int64 area_id =23;
    string birthday =24;
    string contact_tel= 25;
    string memo =26;
    string source =27;
    int64 by_fan_id = 28;
    string status =29;
    string created_at =30;
    string updated_at =31;
    string deleted_at =32;
    Rank rank =33;
    repeated Tag tags = 34;
    repeated Address addresses = 36;
}

//客户查询参数
message MemberRequest {
    int32 paged = 1;
    int32 page_size = 2;
    string sorting = 3;
    //以下为自定义参数
    int64 id = 4;
    int32 type = 5;
    string name = 6;
    string gender =7;
    string contact_tel =8;
    string real_name =9;
    int32 rank_id =10;
    int32 card_id =11;
    int32 tag_id =12;
    string source =13;
    int64 area_id =14;
    string status =15;
    string keywords =16;
    int64 member_id = 17;
    string mobile =18;
    string email =19;
    bool bound_mobile =20;
    bool bound_email =21;
    bool bound_wx =22;
    int64 recommender_id =23;
    int64 avatar_id =24;
    string avatar_url =25;
    string refer_url =26;
    string wx_open_id =27;
    string username =28;
    string password =29;
    string code =30;
    repeated int64 ids = 31;
}

message MemberData {
    Member entity = 1;
    common.Pager pager =2;
    repeated Member items = 3;
    common.Info info =4;
}

message MemberResponse {
    MemberData data = 1;
    common.Error error = 2;
}
